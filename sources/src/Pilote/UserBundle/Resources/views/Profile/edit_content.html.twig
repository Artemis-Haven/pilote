{#

Copyright (C) 2015 Hamza Ayoub, Valentin Chareyre, Sofian Hamou-Mamar, 
Alain Krok, Wenlong Li, Rémi Patrizio, Yamine Zaidou

--------------------------------

This file is part of Pilote.

    Pilote is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Pilote is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Pilote.  If not, see <http://www.gnu.org/licenses/>.

#}

{% trans_default_domain 'FOSUserBundle' %}
{% form_theme form _self %}

<div class="container" id="user_edit">
    <div class="row">
        <aside class="col-md-3">
            {% render(controller("PiloteUserBundle:Profile:editPicture")) %}
        </aside>
        <section class="col-md-9">
            <div class="sheet">
		{% if not app.user.fromLDAP %}
                <form class="form-horizontal" action="{{ path('pilote_profil_edit') }}"  {{ form_enctype(form) }} method="POST">
                    <div class="form-group">
                        <div class="col-sm-3">{{ form_label(form.username) }}</div>
                        <div class="col-sm-9">{{ form_widget(form.username, {'attr': {'class': 'form-control'}}) }}</div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3">{{ form_label(form.email) }}</div>
                        <div class="col-sm-9">{{ form_widget(form.email, {'attr': {'class': 'form-control'}}) }}</div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3">{{ form_label(form.current_password) }}</div>
                        <div class="col-sm-9">{{ form_widget(form.current_password, {'attr': {'class': 'form-control'}}) }}</div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3">
                            <a class="btn btn-block btn-default" href="{{ path('pilote_profil_show') }}">Revenir au profil</a>
                        </div>
                        <div class="col-sm-3">
                            <input class="btn btn-block btn-primary" type="submit" value="{{ 'registration.submit'|trans }}" />
                        </div>
                    </div>
                    {{ form_rest(form) }} {# pour le jeton CSRF en hidden #}
                </form>
		{% else %}
		<div class="form-horizontal">
		    <div class="form-group">
                        <div class="col-sm-3">{{ form_label(form.username) }}</div>
                        <div class="col-sm-9">{{ app.user.username }}</div>
		    </div>
		    <div class="form-group">
                        <div class="col-sm-3"><label for="">Nom affiché :</label></div>
                        <div class="col-sm-9">{{ app.user.displayName }}</div>
		    </div>
		    <div class="form-group">
                        <div class="col-sm-3">{{ form_label(form.email) }}</div>
                        <div class="col-sm-9">{{ app.user.email }}</div>
		    </div>
		</div>
		{% endif %}
            </div>
        </section>
    </div>
</div>
